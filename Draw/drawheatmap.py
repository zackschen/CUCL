import numpy as np
import pylab
import matplotlib.pyplot as plt
from matplotlib.pyplot import MultipleLocator
from computeAA import getAccs
plt.switch_backend('agg')
import re
import pandas as pd
import seaborn as sns

# a = '[{"0":38.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0,"8":0,"9":0},{"0":27.0,"1":82.0,"2":45.0,"3":28.0,"4":15.0,"5":84.0,"6":12.0,"7":9,"8":8,"9":56},{"0":25.0,"1":0.0,"2":3.0,"3":9.0,"4":5.0,"5":2.0,"6":3.0,"7":29,"8":27,"9":3},{"0":5.0,"1":13.0,"2":20.0,"3":10.0,"4":44.0,"5":6.0,"6":42.0,"7":12,"8":58,"9":5},{"0":4.0,"1":2.0,"2":26.0,"3":10.0,"4":10.0,"5":7.0,"6":20.0,"7":17,"8":1,"9":32},{"0":1.0,"1":1.0,"2":6.0,"3":42.0,"4":20.0,"5":1.0,"6":14.0,"7":26,"8":1,"9":3},{"0":0.0,"1":2.0,"2":0.0,"3":1.0,"4":5.0,"5":0.0,"6":9.0,"7":0,"8":1,"9":0},{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0,"8":0,"9":0},{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":1.0,"5":0.0,"6":0.0,"7":4,"8":0,"9":0},{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":3,"8":4,"9":1}]'
a = '[{"0":162.0,"1":408.0,"2":233,"3":170.0,"4":111,"5":443.0,"6":57,"7":57,"8":38,"9":314.0},{"0":152.0,"1":1.0,"2":0,"3":0.0,"4":0,"5":0.0,"6":0,"7":1,"8":0,"9":1.0},{"0":108.0,"1":3.0,"2":19,"3":49.0,"4":44,"5":10.0,"6":50,"7":141,"8":171,"9":8.0},{"0":49.0,"1":15.0,"2":109,"3":47.0,"4":79,"5":25.0,"6":92,"7":67,"8":7,"9":151.0},{"0":19.0,"1":64.0,"2":102,"3":51.0,"4":154,"5":21.0,"6":183,"7":108,"8":258,"9":15.0},{"0":6.0,"1":6.0,"2":0,"3":2.0,"4":5,"5":1.0,"6":27,"7":4,"8":2,"9":2.0},{"0":4.0,"1":3.0,"2":33,"3":178.0,"4":105,"5":0.0,"6":75,"7":98,"8":9,"9":9.0},{"0":0.0,"1":0.0,"2":0,"3":0.0,"4":0,"5":0.0,"6":0,"7":0,"8":0,"9":0.0},{"0":0.0,"1":0.0,"2":0,"3":3.0,"4":1,"5":0.0,"6":0,"7":11,"8":2,"9":0.0},{"0":0,"1":0,"2":4,"3":0,"4":1,"5":0,"6":16,"7":13,"8":13,"9":0}]'
df = pd.read_json(a,encoding="utf-8", orient='records')
print(df)

figure = plt.figure(dpi=300)
sns.set_theme()

# Draw a heatmap with the numeric values in each cell
f, ax = plt.subplots(figsize=(9, 6))
sns.heatmap(df, annot=True, fmt="d", linewidths=.5, ax=ax)
plt.xlabel('Class')
plt.ylabel('Codeword')
plt.tight_layout()
plt.savefig('./graph/heatmap_train.pdf')
plt.close()